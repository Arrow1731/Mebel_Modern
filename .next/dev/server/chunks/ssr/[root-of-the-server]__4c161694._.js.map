{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nebel_WebSite/2025_DEC_MEbel/Mebel_Modern/app/catalog/page.tsx"],"sourcesContent":["// 'use client';\r\n\r\n// import { useState, useEffect } from 'react';\r\n// import LoginModal from '@/components/login-user'; // ✅ LOGIN MODAL QO‘SHILDI\r\n// import { collection, onSnapshot } from 'firebase/firestore';\r\n// import { db } from '@/lib/firebase';\r\n// import { Product, FURNITURE_CATEGORIES } from '@/lib/types';\r\n// import { Card, CardContent } from '@/components/ui/card';\r\n// import { Button } from '@/components/ui/button';\r\n// import Image from 'next/image';\r\n// import Link from 'next/link';\r\n\r\n// export default function CatalogPage() {\r\n//   const [isLoggedIn, setIsLoggedIn] = useState(false); // ✅ NEW\r\n//   const [products, setProducts] = useState<Product[]>([]);\r\n//   const [selectedCategory, setSelectedCategory] = useState('Barchasi');\r\n//   const [searchTerm, setSearchTerm] = useState('');\r\n//   const [loading, setLoading] = useState(true);\r\n\r\n//   // ✅ CHECK LOGIN\r\n//   useEffect(() => {\r\n//     const logged = localStorage.getItem('isLoggedIn') === 'true';\r\n//     setIsLoggedIn(logged);\r\n\r\n//     if (!logged) {\r\n//       setLoading(false);\r\n//       return;\r\n//     }\r\n\r\n//     const unsubscribe = onSnapshot(collection(db, 'products'), (snapshot) => {\r\n//       const prods = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Product));\r\n//       setProducts(prods);\r\n//       setLoading(false);\r\n//     });\r\n\r\n//     return () => unsubscribe();\r\n//   }, []);\r\n\r\n//   // ❗ AGAR ADMIN KIRMAGAN BO'LSA — FAQAT LOGIN CHIQADI\r\n//   if (!isLoggedIn) {\r\n//     return <LoginModal onLoginSuccess={() => setIsLoggedIn(true)} />;\r\n//   }\r\n\r\n//   const filteredProducts = products.filter(p => {\r\n//     const matchCategory = selectedCategory === 'Barchasi' || p.category === selectedCategory;\r\n//     const matchSearch = p.name.toLowerCase().includes(searchTerm.toLowerCase());\r\n//     return matchCategory && matchSearch;\r\n//   });\r\n\r\n//   return (\r\n//     <main className=\"min-h-screen bg-gray-50\">\r\n//       <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n//         <h1 className=\"text-4xl font-bold text-amber-900 mb-8\">Mahsulotlar Katalogi</h1>\r\n\r\n//         {/* Search */}\r\n//         <div className=\"mb-6\">\r\n//           <input\r\n//             type=\"text\"\r\n//             placeholder=\"Mahsulotni Qidirish...\"\r\n//             value={searchTerm}\r\n//             onChange={(e) => setSearchTerm(e.target.value)}\r\n//             className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\"\r\n//           />\r\n//         </div>\r\n\r\n//         {/* Categories */}\r\n//         <div className=\"mb-6 flex flex-wrap gap-2\">\r\n//           <button\r\n//             onClick={() => setSelectedCategory('Barchasi')}\r\n//             className={`px-4 py-2 rounded-lg font-medium transition ${\r\n//               selectedCategory === 'Barchasi'\r\n//                 ? 'bg-amber-600 text-white'\r\n//                 : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'\r\n//             }`}\r\n//           >\r\n//             Barchasi\r\n//           </button>\r\n\r\n//           {FURNITURE_CATEGORIES.map(cat => (\r\n//             <button\r\n//               key={cat}\r\n//               onClick={() => setSelectedCategory(cat)}\r\n//               className={`px-4 py-2 rounded-lg font-medium transition ${\r\n//                 selectedCategory === cat\r\n//                   ? 'bg-amber-600 text-white'\r\n//                   : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'\r\n//               }`}\r\n//             >\r\n//               {cat}\r\n//             </button>\r\n//           ))}\r\n//         </div>\r\n\r\n//         {/* Products Grid */}\r\n//         {loading ? (\r\n//           <div className='text-center text-[45px] mt-[250px]'>Yuklanmoqda...</div>\r\n//         ) : filteredProducts.length === 0 ? (\r\n//           <div className='text-center'>\r\n//             <p className=\"text-gray-500 text-[40px] mt-[250px]\">Mahsulotlar Topilmadi.</p>\r\n//             <span className='font-bold text-[32px] mt-[250px]'>\r\n//               Mahsulotlarni ko‘rish uchun yuqoridan <span className='text-amber-800'>kategoriyani</span> tanlang!\r\n//             </span>\r\n//           </div>\r\n//         ) : (\r\n//           <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n//             {filteredProducts.map(product => (\r\n//               <Card key={product.id} className=\"overflow-hidden hover:shadow-lg transition group\">\r\n\r\n//                 <div className=\"relative w-full h-[250px] bg-gray-200\">\r\n//                   {product.images && product.images[0] ? (\r\n//                     <Image\r\n//                       src={product.images[0] || \"/placeholder.svg\"}\r\n//                       alt={product.name}\r\n//                       fill\r\n//                       className=\"object-cover group-hover:scale-105 transition\"\r\n//                     />\r\n//                   ) : (\r\n//                     <div className=\"flex items-center justify-center h-full text-gray-400\">\r\n//                       Mahsulot Surati Mavjud Emas!\r\n//                     </div>\r\n//                   )}\r\n//                 </div>\r\n\r\n//                 <CardContent className=\"pt-4\">\r\n//                   <h3 className=\"font-bold text-amber-900 mb-1 line-clamp-2\">{product.name}</h3>\r\n//                   <p className=\"text-sm text-gray-600 mb-2\">{product.category}</p>\r\n//                   <p className=\"text-sm text-gray-700 mb-3 line-clamp-2\">{product.description}</p>\r\n\r\n//                   <div className=\"flex justify-between items-center mb-3\">\r\n\r\n//                     <span className=\"text-lg font-bold text-amber-700\">\r\n//                       {Number(product.price).toLocaleString('ru-RU')} So'm\r\n//                     </span>\r\n\r\n//                     <span className={`text-sm text-center px-2 py-1 rounded ${product.quantity > 0 ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\r\n//                       {product.quantity > 0 ? 'Sotuvda Mavjud' : 'Tugagan'}\r\n//                     </span>\r\n\r\n//                   </div>\r\n\r\n//                   <Button className=\"w-full bg-amber-600 hover:bg-amber-700\">\r\n//                     <a href={`/product/${product.id}`}>Mahsulot Haqida...</a>\r\n//                   </Button>\r\n//                 </CardContent>\r\n\r\n//               </Card>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n//     </main>\r\n//   );\r\n// }"],"names":[],"mappings":"AAAA,gBAAgB;AAEhB,+CAA+C;AAC/C,+EAA+E;AAC/E,+DAA+D;AAC/D,uCAAuC;AACvC,+DAA+D;AAC/D,4DAA4D;AAC5D,mDAAmD;AACnD,kCAAkC;AAClC,gCAAgC;AAEhC,0CAA0C;AAC1C,kEAAkE;AAClE,6DAA6D;AAC7D,0EAA0E;AAC1E,sDAAsD;AACtD,kDAAkD;AAElD,qBAAqB;AACrB,sBAAsB;AACtB,oEAAoE;AACpE,6BAA6B;AAE7B,qBAAqB;AACrB,2BAA2B;AAC3B,gBAAgB;AAChB,QAAQ;AAER,iFAAiF;AACjF,4FAA4F;AAC5F,4BAA4B;AAC5B,2BAA2B;AAC3B,UAAU;AAEV,kCAAkC;AAClC,YAAY;AAEZ,0DAA0D;AAC1D,uBAAuB;AACvB,wEAAwE;AACxE,MAAM;AAEN,oDAAoD;AACpD,gGAAgG;AAChG,mFAAmF;AACnF,2CAA2C;AAC3C,QAAQ;AAER,aAAa;AACb,iDAAiD;AACjD,sDAAsD;AACtD,2FAA2F;AAE3F,yBAAyB;AACzB,iCAAiC;AACjC,mBAAmB;AACnB,0BAA0B;AAC1B,mDAAmD;AACnD,iCAAiC;AACjC,8DAA8D;AAC9D,6EAA6E;AAC7E,eAAe;AACf,iBAAiB;AAEjB,6BAA6B;AAC7B,sDAAsD;AACtD,oBAAoB;AACpB,8DAA8D;AAC9D,yEAAyE;AACzE,gDAAgD;AAChD,8CAA8C;AAC9C,qFAAqF;AACrF,kBAAkB;AAClB,cAAc;AACd,uBAAuB;AACvB,sBAAsB;AAEtB,+CAA+C;AAC/C,sBAAsB;AACtB,0BAA0B;AAC1B,yDAAyD;AACzD,2EAA2E;AAC3E,2CAA2C;AAC3C,gDAAgD;AAChD,uFAAuF;AACvF,oBAAoB;AACpB,gBAAgB;AAChB,sBAAsB;AACtB,wBAAwB;AACxB,gBAAgB;AAChB,iBAAiB;AAEjB,gCAAgC;AAChC,uBAAuB;AACvB,qFAAqF;AACrF,gDAAgD;AAChD,0CAA0C;AAC1C,6FAA6F;AAC7F,kEAAkE;AAClE,oHAAoH;AACpH,sBAAsB;AACtB,mBAAmB;AACnB,gBAAgB;AAChB,mFAAmF;AACnF,iDAAiD;AACjD,qGAAqG;AAErG,0EAA0E;AAC1E,6DAA6D;AAC7D,6BAA6B;AAC7B,sEAAsE;AACtE,2CAA2C;AAC3C,6BAA6B;AAC7B,kFAAkF;AAClF,yBAAyB;AACzB,0BAA0B;AAC1B,8FAA8F;AAC9F,qDAAqD;AACrD,6BAA6B;AAC7B,uBAAuB;AACvB,yBAAyB;AAEzB,iDAAiD;AACjD,mGAAmG;AACnG,qFAAqF;AACrF,qGAAqG;AAErG,6EAA6E;AAE7E,0EAA0E;AAC1E,6EAA6E;AAC7E,8BAA8B;AAE9B,qKAAqK;AACrK,8EAA8E;AAC9E,8BAA8B;AAE9B,2BAA2B;AAE3B,gFAAgF;AAChF,gFAAgF;AAChF,8BAA8B;AAC9B,iCAAiC;AAEjC,wBAAwB;AACxB,kBAAkB;AAClB,mBAAmB;AACnB,aAAa;AACb,eAAe;AACf,cAAc;AACd,OAAO;AACP,IAAI"}}]
}