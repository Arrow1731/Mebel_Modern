{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nebel_WebSite/2025_DEC_MEbel/Mebel_Modern/app/orders/%5Bid%5D/page.tsx"],"sourcesContent":["// 'use client';\r\n\r\n// import { useState, useEffect } from 'react';\r\n// import { useParams } from 'next/navigation';\r\n// import { doc, onSnapshot, updateDoc, arrayUnion } from 'firebase/firestore';\r\n// import { db } from '@/lib/firebase';\r\n// import { Order } from '@/lib/types';\r\n// import { Button } from '@/components/ui/button';\r\n\r\n// const FIXED_MONTHS = [\r\n//   'Yanvar', 'Fevral', 'Mart', 'Aprel', 'May', 'Iyun',\r\n//   'Iyul', 'Avgust', 'Sentabr', 'Oktabr', 'Noyabr', 'Dekabr'\r\n// ];\r\n\r\n// export default function OrderDetailPage() {\r\n//   const params = useParams();\r\n//   const orderId = params.id;\r\n//   const [order, setOrder] = useState<Order | null>(null);\r\n//   const [loading, setLoading] = useState(true);\r\n\r\n//   // === REAL-TIME OLISH ===\r\n//   useEffect(() => {\r\n//     const unsubscribe = onSnapshot(doc(db, 'orders', orderId), (docSnap) => {\r\n//       if (!docSnap.exists()) return;\r\n\r\n//       const data = docSnap.data();\r\n//       setOrder({\r\n//         id: docSnap.id,\r\n//         ...data,\r\n//         payments: data.payments?.map((p: any) => ({\r\n//           ...p,\r\n//           date: p.date?.toDate?.() || new Date(),\r\n//         })) || [],\r\n//         createdAt: data.createdAt?.toDate?.() || new Date(),\r\n//         firstPaymentDate:\r\n//           data.firstPaymentDate?.toDate?.() || data.createdAt?.toDate?.() || new Date(),\r\n//       });\r\n\r\n//       setLoading(false);\r\n//     });\r\n\r\n//     return () => unsubscribe();\r\n//   }, [orderId]);\r\n\r\n//   if (loading || !order) return <p>Yuklanmoqda‚Ä¶</p>;\r\n\r\n//   const monthlyAmount = Math.round(\r\n//     (Number(order.totalAmount) - Number(order.paidAmount || 0)) /\r\n//       ((order.creditMonths || 1) - (order.payments?.length || 0))\r\n//   );\r\n\r\n//   // === OYNI TO‚ÄòLANGAN DEB YOZISH ===\r\n//   const markAsPaid = async (monthIndex: number) => {\r\n//     const pay = {\r\n//       monthIndex,\r\n//       amount: monthlyAmount,\r\n//       date: new Date(),\r\n//     };\r\n\r\n//     await updateDoc(doc(db, 'orders', orderId), {\r\n//       payments: arrayUnion(pay),\r\n//       paidAmount: Number(order.paidAmount || 0) + monthlyAmount,\r\n//     });\r\n//   };\r\n\r\n//   // === KEYINGI TO‚ÄòLOV SANASI ===\r\n//   const getNextPaymentDate = (monthIndex: number) => {\r\n//     const baseDate = new Date(order.firstPaymentDate);\r\n//     baseDate.setMonth(baseDate.getMonth() + monthIndex);\r\n//     return baseDate.toLocaleDateString();\r\n//   };\r\n\r\n//   return (\r\n//     <main className=\"p-6\">\r\n//       <h1 className=\"text-2xl font-bold mb-3\">{order.clientName} ‚Äî To‚Äòlov tafsiloti</h1>\r\n\r\n//       <p>üìû Telefon: {order.clientPhone}</p>\r\n//       <p>üìç Manzil: {order.clientAddress}</p>\r\n\r\n//       <table className=\"w-full mt-6 border text-sm\">\r\n//         <thead className=\"bg-gray-100\">\r\n//           <tr>\r\n//             <th className=\"px-3 py-2\">Oy</th>\r\n//             <th className=\"px-3 py-2\">To‚Äòlov miqdori</th>\r\n//             <th className=\"px-3 py-2\">Holat</th>\r\n//             <th className=\"px-3 py-2\">Keyingi to‚Äòlov sanasi</th>\r\n//             <th className=\"px-3 py-2\">Amal</th>\r\n//           </tr>\r\n//         </thead>\r\n\r\n//         <tbody>\r\n//           {Array.from({ length: order.creditMonths || 0 }).map((_, i) => {\r\n//             const monthLabel = FIXED_MONTHS[i % 12];\r\n\r\n//             const payment = order.payments?.find((p) => p.monthIndex === i);\r\n\r\n//             return (\r\n//               <tr\r\n//                 key={i}\r\n//                 className={`border-b ${\r\n//                   payment ? 'bg-green-50' : 'bg-yellow-50'\r\n//                 }`}\r\n//               >\r\n//                 <td className=\"px-3 py-2\">{monthLabel}</td>\r\n\r\n//                 <td className=\"px-3 py-2\">{monthlyAmount.toLocaleString()} so‚Äòm</td>\r\n\r\n//                 <td className=\"px-3 py-2\">\r\n//                   {payment ? 'To‚Äòlangan ‚úì' : 'Kutilmoqda'}\r\n//                 </td>\r\n\r\n//                 <td className=\"px-3 py-2\">\r\n//                   {!payment ? getNextPaymentDate(i) : ''}\r\n//                 </td>\r\n\r\n//                 <td className=\"px-3 py-2\">\r\n//                   {!payment && (\r\n//                     <Button\r\n//                       className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n//                       onClick={() => markAsPaid(i)}\r\n//                     >\r\n//                       To‚Äòlandi\r\n//                     </Button>\r\n//                   )}\r\n//                 </td>\r\n//               </tr>\r\n//             );\r\n//           })}\r\n//         </tbody>\r\n//       </table>\r\n//     </main>\r\n//   );\r\n// }"],"names":[],"mappings":"AAAA,gBAAgB;AAEhB,+CAA+C;AAC/C,+CAA+C;AAC/C,+EAA+E;AAC/E,uCAAuC;AACvC,uCAAuC;AACvC,mDAAmD;AAEnD,yBAAyB;AACzB,wDAAwD;AACxD,8DAA8D;AAC9D,KAAK;AAEL,8CAA8C;AAC9C,gCAAgC;AAChC,+BAA+B;AAC/B,4DAA4D;AAC5D,kDAAkD;AAElD,+BAA+B;AAC/B,sBAAsB;AACtB,gFAAgF;AAChF,uCAAuC;AAEvC,qCAAqC;AACrC,mBAAmB;AACnB,0BAA0B;AAC1B,mBAAmB;AACnB,sDAAsD;AACtD,kBAAkB;AAClB,oDAAoD;AACpD,qBAAqB;AACrB,+DAA+D;AAC/D,4BAA4B;AAC5B,2FAA2F;AAC3F,YAAY;AAEZ,2BAA2B;AAC3B,UAAU;AAEV,kCAAkC;AAClC,mBAAmB;AAEnB,uDAAuD;AAEvD,sCAAsC;AACtC,oEAAoE;AACpE,oEAAoE;AACpE,OAAO;AAEP,yCAAyC;AACzC,uDAAuD;AACvD,oBAAoB;AACpB,oBAAoB;AACpB,+BAA+B;AAC/B,0BAA0B;AAC1B,SAAS;AAET,oDAAoD;AACpD,mCAAmC;AACnC,mEAAmE;AACnE,UAAU;AACV,OAAO;AAEP,qCAAqC;AACrC,yDAAyD;AACzD,yDAAyD;AACzD,2DAA2D;AAC3D,4CAA4C;AAC5C,OAAO;AAEP,aAAa;AACb,6BAA6B;AAC7B,2FAA2F;AAE3F,+CAA+C;AAC/C,gDAAgD;AAEhD,uDAAuD;AACvD,0CAA0C;AAC1C,iBAAiB;AACjB,gDAAgD;AAChD,4DAA4D;AAC5D,mDAAmD;AACnD,mEAAmE;AACnE,kDAAkD;AAClD,kBAAkB;AAClB,mBAAmB;AAEnB,kBAAkB;AAClB,6EAA6E;AAC7E,uDAAuD;AAEvD,+EAA+E;AAE/E,uBAAuB;AACvB,oBAAoB;AACpB,0BAA0B;AAC1B,0CAA0C;AAC1C,6DAA6D;AAC7D,sBAAsB;AACtB,kBAAkB;AAClB,8DAA8D;AAE9D,uFAAuF;AAEvF,6CAA6C;AAC7C,6DAA6D;AAC7D,wBAAwB;AAExB,6CAA6C;AAC7C,4DAA4D;AAC5D,wBAAwB;AAExB,6CAA6C;AAC7C,mCAAmC;AACnC,8BAA8B;AAC9B,+EAA+E;AAC/E,sDAAsD;AACtD,wBAAwB;AACxB,iCAAiC;AACjC,gCAAgC;AAChC,uBAAuB;AACvB,wBAAwB;AACxB,sBAAsB;AACtB,iBAAiB;AACjB,gBAAgB;AAChB,mBAAmB;AACnB,iBAAiB;AACjB,cAAc;AACd,OAAO;AACP,IAAI"}}]
}