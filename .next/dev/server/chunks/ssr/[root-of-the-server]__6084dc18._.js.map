{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nebel_WebSite/2025_DEC_MEbel/Mebel_Modern/lib/firebase.ts"],"sourcesContent":["import { initializeApp } from 'firebase/app';\r\nimport { getFirestore } from 'firebase/firestore';\r\nimport { getStorage } from 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDzl9OP8Avxt6qvxI7H91RwA6SMwvEsfjg\",\r\n  authDomain: \"mebelweb-c3706.firebaseapp.com\",\r\n  projectId: \"mebelweb-c3706\",\r\n  storageBucket: \"mebelweb-c3706.firebasestorage.app\",\r\n  messagingSenderId: \"914008148864\",\r\n  appId: \"1:914008148864:web:36dbf5a4a738f8b72d8f65\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nexport const db = getFirestore(app);\r\nexport const storage = getStorage(app);\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;AACT;AAEA,MAAM,MAAM,IAAA,iLAAa,EAAC;AACnB,MAAM,KAAK,IAAA,iLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,kMAAU,EAAC"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nebel_WebSite/2025_DEC_MEbel/Mebel_Modern/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nebel_WebSite/2025_DEC_MEbel/Mebel_Modern/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nebel_WebSite/2025_DEC_MEbel/Mebel_Modern/app/orders/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { doc, onSnapshot, updateDoc, arrayUnion } from 'firebase/firestore';\r\nimport { db } from '@/lib/firebase';\r\nimport { Order } from '@/lib/types';\r\nimport { Button } from '@/components/ui/button';\r\n\r\nconst FIXED_MONTHS = [\r\n  'Yanvar', 'Fevral', 'Mart', 'Aprel', 'May', 'Iyun',\r\n  'Iyul', 'Avgust', 'Sentabr', 'Oktabr', 'Noyabr', 'Dekabr'\r\n];\r\n\r\nexport default function OrderDetailPage() {\r\n  const { id } = useParams();\r\n  const router = useRouter(); // <-- BACK BUTTON UCHUN\r\n  const [order, setOrder] = useState<Order | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // realtime yuklash\r\n  useEffect(() => {\r\n    const unsub = onSnapshot(doc(db, 'orders', id as string), snap => {\r\n      if (!snap.exists()) return;\r\n\r\n      const data = snap.data();\r\n\r\n      setOrder({\r\n        id: snap.id,\r\n        ...data,\r\n        payments:\r\n          data.payments?.map((p: any) => ({\r\n            ...p,\r\n            date: p.date?.toDate?.() || new Date(),\r\n          })) || [],\r\n        createdAt: data.createdAt?.toDate?.() || new Date(),\r\n        firstPaymentDate:\r\n          data.firstPaymentDate?.toDate?.() ||\r\n          data.createdAt?.toDate?.() ||\r\n          new Date(),\r\n      });\r\n\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsub();\r\n  }, [id]);\r\n\r\n  if (loading || !order) return <p className=\"p-6 text-xl\">Yuklanmoqda...</p>;\r\n\r\n  const fullyPaid =\r\n    Number(order.paidAmount || 0) >= Number(order.totalAmount);\r\n\r\n  const monthlyAmount = Math.round(\r\n    (Number(order.totalAmount) - Number(order.paidAmount || 0)) /\r\n      ((order.creditMonths || 1) - (order.payments?.length || 0))\r\n  );\r\n\r\n  const markAsPaid = async (monthIndex: number) => {\r\n    const newPayment = {\r\n      monthIndex,\r\n      amount: monthlyAmount,\r\n      date: new Date(),\r\n    };\r\n\r\n    const totalPaid = Number(order.paidAmount || 0) + monthlyAmount;\r\n    const isFully = totalPaid >= Number(order.totalAmount);\r\n\r\n    await updateDoc(doc(db, 'orders', id as string), {\r\n      payments: arrayUnion(newPayment),\r\n      paidAmount: totalPaid,\r\n      paymentStatus: isFully ? 'paid' : order.paymentStatus,\r\n    });\r\n  };\r\n\r\n  const getNextPaymentDate = (monthIndex: number) => {\r\n    const date = new Date(order.firstPaymentDate);\r\n    date.setMonth(date.getMonth() + monthIndex);\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  const rows = Array.from({ length: order.creditMonths || 0 }).map((_, i) => {\r\n    const payment = order.payments?.find(p => p.monthIndex === i);\r\n    return { index: i, paid: Boolean(payment), payment };\r\n  });\r\n\r\n  rows.sort((a, b) => Number(a.paid) - Number(b.paid));\r\n\r\n  // === TO‚ÄòLIQ TO‚ÄòLANGAN ‚Äî JADVAL KO‚ÄòRINMAYDI ===\r\n  if (order.paymentStatus === 'paid' || fullyPaid) {\r\n    return (\r\n      <main className=\"p-4 md:p-6\">\r\n        {/* BACK BUTTON */}\r\n        <Button\r\n          className=\"bg-gray-700 hover:bg-gray-800 text-white mb-4\"\r\n          onClick={() => router.back()}\r\n        >\r\n          ‚Üê Orqaga\r\n        </Button>\r\n\r\n        <h1 className=\"text-2xl font-bold mb-3\">{order.clientName}</h1>\r\n\r\n        <p className=\"p-4 bg-green-100 border border-green-400 text-green-800 rounded\">\r\n          ‚úÖ Ushbu mijoz barcha bo‚Äòlib-to‚Äòlovlarni to‚Äòliq to‚Äòladi.\r\n        </p>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"p-4 md:p-6\">\r\n\r\n      {/* BACK BUTTON */}\r\n      <Button\r\n        className=\"bg-gray-700 hover:bg-gray-800 text-white mb-4\"\r\n        onClick={() => router.back()}\r\n      >\r\n        ‚Üê Orqaga\r\n      </Button>\r\n\r\n      <h1 className=\"text-2xl font-bold mb-3\">\r\n        {order.clientName} ‚Äî To‚Äòlov tafsiloti\r\n      </h1>\r\n\r\n      <div className=\"text-sm mb-4\">\r\n        <p>üìû Telefon: <b>{order.clientPhone}</b></p>\r\n        <p>üìç Manzil: {order.clientAddress}</p>\r\n      </div>\r\n\r\n      {/* RESPONSIVE TABLE */}\r\n      <div className=\"overflow-auto rounded border w-full\">\r\n        <table className=\"w-full text-sm min-w-[800px]\">\r\n          <thead className=\"bg-gray-100\">\r\n            <tr>\r\n              <th className=\"px-3 py-2 text-left\">Oy</th>\r\n              <th className=\"px-3 py-2 text-left\">To‚Äòlov miqdori</th>\r\n              <th className=\"px-3 py-2 text-left\">Holat</th>\r\n              <th className=\"px-3 py-2 text-left\">To‚Äòlov sanasi</th>\r\n              <th className=\"px-3 py-2 text-left\">Keyingi to‚Äòlov</th>\r\n              <th className=\"px-3 py-2 text-left\">Amal</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {rows.map(({ index, paid, payment }) => {\r\n              const monthLabel = FIXED_MONTHS[index % 12];\r\n\r\n              return (\r\n                <tr\r\n                  key={index}\r\n                  className={`border-b ${paid ? 'bg-green-50' : 'bg-yellow-50'}`}\r\n                >\r\n                  <td className=\"px-3 py-2\">{monthLabel}</td>\r\n\r\n                  <td className=\"px-3 py-2\">\r\n                    {monthlyAmount.toLocaleString()} so‚Äòm\r\n                  </td>\r\n\r\n                  <td className=\"px-3 py-2\">\r\n                    {paid ? 'To‚Äòlangan ‚úì' : 'Kutilmoqda'}\r\n                  </td>\r\n\r\n                  <td className=\"px-3 py-2\">\r\n                    {paid ? payment?.date?.toLocaleDateString() : '-'}\r\n                  </td>\r\n\r\n                  <td className=\"px-3 py-2\">\r\n                    {!paid ? getNextPaymentDate(index) : ''}\r\n                  </td>\r\n\r\n                  <td className=\"px-3 py-2\">\r\n                    {!paid && (\r\n                      <Button\r\n                        className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n                        onClick={() => markAsPaid(index)}\r\n                      >\r\n                        To‚Äòlandi\r\n                      </Button>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}