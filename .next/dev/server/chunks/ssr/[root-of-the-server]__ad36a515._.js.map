{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nebel_WebSite/V0__D/MEBEL_GOOO/Mebel_Modern/app/credit-customers/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { db } from \"@/firebase\";\r\nimport { collection, getDocs } from \"firebase/firestore\";\r\n\r\nexport default function PartialCustomersPage() {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchOrders = async () => {\r\n      try {\r\n        const querySnapshot = await getDocs(collection(db, \"orders\"));\r\n        const data = querySnapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n\r\n        // Filter only partial payment customers\r\n        const partial = data.filter(\r\n          (order) => order.paymentType === \"partial\" || order.paymentType === \"installment\"\r\n        );\r\n\r\n        setOrders(partial);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  const getNextPaymentWarning = (nextPaymentDate) => {\r\n    if (!nextPaymentDate) return \"\";\r\n\r\n    const today = new Date();\r\n    const next = new Date(nextPaymentDate);\r\n\r\n    const diff = Math.ceil((next - today) / (1000 * 60 * 60 * 24));\r\n\r\n    if (diff <= 3 && diff >= 0) {\r\n      return `ðŸ”´ Payment in ${diff} day(s)!`;\r\n    }\r\n\r\n    return \"\";\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-8 text-center text-xl font-semibold\">\r\n        Loading...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-8\">\r\n      <h1 className=\"text-3xl font-bold mb-6\">Partial Payment Customers</h1>\r\n\r\n      {orders.length === 0 ? (\r\n        <p className=\"text-lg\">No partial customers found.</p>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          {orders.map((order) => (\r\n            <div\r\n              key={order.id}\r\n              className=\"border rounded-xl p-6 shadow-lg bg-white\"\r\n            >\r\n              <h2 className=\"text-xl font-bold mb-2\">{order.customerName}</h2>\r\n\r\n              <p><strong>Phone:</strong> {order.phone}</p>\r\n              <p><strong>Product:</strong> {order.productName}</p>\r\n              <p><strong>Total Cost:</strong> {order.cost} so'm</p>\r\n              <p><strong>Monthly Payment:</strong> {order.monthlyPayment} so'm</p>\r\n\r\n              <p><strong>Start Date:</strong> {order.paymentStartDate}</p>\r\n              <p><strong>Next Payment:</strong> {order.nextPaymentDate}</p>\r\n\r\n              <p className=\"mt-3 text-red-600 font-semibold\">\r\n                {getNextPaymentWarning(order.nextPaymentDate)}\r\n              </p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;;;;;;AAEA;AAAA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,cAAc;YAClB,IAAI;gBACF,MAAM,gBAAgB,MAAM,IAAA,4KAAO,EAAC,IAAA,+KAAU,EAAC,IAAI;gBACnD,MAAM,OAAO,cAAc,IAAI,CAAC,GAAG,CAAC,CAAC,MAAQ,CAAC;wBAC5C,IAAI,IAAI,EAAE;wBACV,GAAG,IAAI,IAAI,EAAE;oBACf,CAAC;gBAED,wCAAwC;gBACxC,MAAM,UAAU,KAAK,MAAM,CACzB,CAAC,QAAU,MAAM,WAAW,KAAK,aAAa,MAAM,WAAW,KAAK;gBAGtE,UAAU;gBACV,WAAW;YACb,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,wBAAwB;gBACtC,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,wBAAwB,CAAC;QAC7B,IAAI,CAAC,iBAAiB,OAAO;QAE7B,MAAM,QAAQ,IAAI;QAClB,MAAM,OAAO,IAAI,KAAK;QAEtB,MAAM,OAAO,KAAK,IAAI,CAAC,CAAC,OAAO,KAAK,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;QAE5D,IAAI,QAAQ,KAAK,QAAQ,GAAG;YAC1B,OAAO,CAAC,cAAc,EAAE,KAAK,QAAQ,CAAC;QACxC;QAEA,OAAO;IACT;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBAAwC;;;;;;IAI3D;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,OAAO,MAAM,KAAK,kBACjB,8OAAC;gBAAE,WAAU;0BAAU;;;;;qCAEvB,8OAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;wBAEC,WAAU;;0CAEV,8OAAC;gCAAG,WAAU;0CAA0B,MAAM,YAAY;;;;;;0CAE1D,8OAAC;;kDAAE,8OAAC;kDAAO;;;;;;oCAAe;oCAAE,MAAM,KAAK;;;;;;;0CACvC,8OAAC;;kDAAE,8OAAC;kDAAO;;;;;;oCAAiB;oCAAE,MAAM,WAAW;;;;;;;0CAC/C,8OAAC;;kDAAE,8OAAC;kDAAO;;;;;;oCAAoB;oCAAE,MAAM,IAAI;oCAAC;;;;;;;0CAC5C,8OAAC;;kDAAE,8OAAC;kDAAO;;;;;;oCAAyB;oCAAE,MAAM,cAAc;oCAAC;;;;;;;0CAE3D,8OAAC;;kDAAE,8OAAC;kDAAO;;;;;;oCAAoB;oCAAE,MAAM,gBAAgB;;;;;;;0CACvD,8OAAC;;kDAAE,8OAAC;kDAAO;;;;;;oCAAsB;oCAAE,MAAM,eAAe;;;;;;;0CAExD,8OAAC;gCAAE,WAAU;0CACV,sBAAsB,MAAM,eAAe;;;;;;;uBAdzC,MAAM,EAAE;;;;;;;;;;;;;;;;AAsB3B"}}]
}