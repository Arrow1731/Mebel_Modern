{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/%D0%9A%D0%B5%D1%88_%D0%A4%D0%B0%D0%B9%D0%BB%D1%8B/Nebel_WebSite/V0__D/furniture-factory-website%20%281%29/lib/firebase.ts"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\nimport { getStorage } from 'firebase/storage';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDzl9OP8Avxt6qvxI7H91RwA6SMwvEsfjg\",\n  authDomain: \"mebelweb-c3706.firebaseapp.com\",\n  projectId: \"mebelweb-c3706\",\n  storageBucket: \"mebelweb-c3706.firebasestorage.app\",\n  messagingSenderId: \"914008148864\",\n  appId: \"1:914008148864:web:36dbf5a4a738f8b72d8f65\"\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const db = getFirestore(app);\nexport const storage = getStorage(app);\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;AACT;AAEA,MAAM,MAAM,IAAA,oLAAa,EAAC;AACnB,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,8KAAU,EAAC"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///D:/%D0%9A%D0%B5%D1%88_%D0%A4%D0%B0%D0%B9%D0%BB%D1%8B/Nebel_WebSite/V0__D/furniture-factory-website%20%281%29/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///D:/%D0%9A%D0%B5%D1%88_%D0%A4%D0%B0%D0%B9%D0%BB%D1%8B/Nebel_WebSite/V0__D/furniture-factory-website%20%281%29/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///D:/%D0%9A%D0%B5%D1%88_%D0%A4%D0%B0%D0%B9%D0%BB%D1%8B/Nebel_WebSite/V0__D/furniture-factory-website%20%281%29/app/credit-payments/page.tsx"],"sourcesContent":["// 'use client';\n\n// import { useState, useEffect } from 'react';\n// import { collection, onSnapshot, updateDoc, doc, addDoc } from 'firebase/firestore';\n// import { db } from '@/lib/firebase';\n// import { Order } from '@/lib/types';\n// import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n// import { AlertCircle, Download, Check, X } from 'lucide-react';\n// import { Button } from '@/components/ui/button';\n\n// export default function CreditPaymentsPage() {\n//   const [orders, setOrders] = useState<Order[]>([]);\n//   const [loading, setLoading] = useState(true);\n//   const [processingId, setProcessingId] = useState<string | null>(null);\n\n//   useEffect(() => {\n//     const unsubscribe = onSnapshot(collection(db, 'orders'), (snapshot) => {\n//       const ords = snapshot.docs\n//         .map(doc => {\n//           const data = doc.data();\n//           return {\n//             id: doc.id,\n//             ...data,\n//             createdAt: data.createdAt?.toDate?.() || new Date(data.createdAt),\n//             dueDate: data.dueDate?.toDate?.() || new Date(data.dueDate),\n//             payments: data.payments?.map((p: any) => ({ ...p, date: p.date?.toDate?.() || new Date(p.date) })) || []\n//           } as Order;\n//         });\n//       setOrders(ords);\n//       setLoading(false);\n//     });\n\n//     return () => unsubscribe();\n//   }, []);\n\n//   const fullyPaid = orders.filter(o => o.paymentStatus === 'fully-paid');\n//   const partiallyPaid = orders.filter(o => o.paymentStatus === 'partial' || (o.paymentStatus === 'pending' && o.creditMonths > 1));\n\n//   const getDaysUntilDue = (date: Date) => {\n//     const now = new Date();\n//     const diff = new Date(date).getTime() - now.getTime();\n//     return Math.ceil(diff / (1000 * 3600 * 24));\n//   };\n\n//   const needsAlert = partiallyPaid.some(o => getDaysUntilDue(o.dueDate) <= 3);\n\n//   const handlePaymentStatus = async (orderId: string, isPaid: boolean) => {\n//     setProcessingId(orderId);\n//     try {\n//       const order = orders.find(o => o.id === orderId);\n//       if (!order) return;\n\n//       if (isPaid) {\n//         // Mark as fully paid\n//         await updateDoc(doc(db, 'orders', orderId), {\n//           paymentStatus: 'fully-paid',\n//           paidAmount: order.totalAmount,\n//           payments: [\n//             ...(order.payments || []),\n//             { amount: order.totalAmount - order.paidAmount, date: new Date(), month: order.creditMonths }\n//           ]\n//         });\n\n//         await addDoc(collection(db, 'analytics_log'), {\n//           type: 'payment_completed',\n//           orderId,\n//           clientName: order.clientName,\n//           amount: order.totalAmount - order.paidAmount,\n//           date: new Date(),\n//           timestamp: new Date()\n//         });\n//       } else {\n//         // Mark as not paid (keep pending)\n//         await addDoc(collection(db, 'analytics_log'), {\n//           type: 'payment_skipped',\n//           orderId,\n//           clientName: order.clientName,\n//           amount: order.totalAmount - order.paidAmount,\n//           date: new Date(),\n//           timestamp: new Date()\n//         });\n//       }\n//     } catch (error) {\n//       console.error('Error updating payment status:', error);\n//     } finally {\n//       setProcessingId(null);\n//     }\n//   };\n\n//   const downloadPDF = (data: Order[], title: string) => {\n//     let csv = `${title}\\n\\n`;\n//     csv += \"Mijon Ismni\", \"Telefon\", \"Yashash Manzili\", \"Narxi\", \"Holati\", \"To'lov Sanasi \\n\";\n//     data.forEach(order => {\n//       csv += `${order.clientName},${order.clientPhone},${order.clientEmail},${order.clientAddress || 'N/A'},${order.totalAmount},${order.paymentStatus},${new Date(order.dueDate).toLocaleDateString()}\\n`;\n//     });\n\n//     const blob = new Blob([csv], { type: 'text/csv' });\n//     const url = window.URL.createObjectURL(blob);\n//     const a = document.createElement('a');\n//     a.href = url;\n//     a.download = `${title}.csv`;\n//     a.click();\n//   };\n\n//   return (\n//     <main className=\"min-h-screen bg-gray-50 py-8\">\n//       <div className=\"max-w-7xl mx-auto px-4\">\n//         <div className=\"flex justify-between items-center mb-8\">\n//           <h1 className=\"text-3xl font-bold text-amber-900\">Kredit To'lovlarini Nazorat Qilish Bo'limi</h1>\n//           {needsAlert && (\n//             <div className=\"flex items-center gap-2 bg-red-100 text-red-700 px-4 py-2 rounded-lg\">\n//               <AlertCircle size={20} />\n//               <span className=\"font-medium\">Belgilangan Muddatdan Oldin To'lovlar Mavjud!</span>\n//             </div>\n//           )}\n//         </div>\n\n//         {loading ? (\n//           <div>Yuklanmoqda...</div>\n//         ) : (\n//           <div className=\"space-y-8\">\n//             {/* Fully Paid */}\n//             <div>\n//               <div className=\"flex justify-between items-center mb-4\">\n//                 <h2 className=\"text-2xl font-bold text-amber-900\">To'liq Holda To'lov Qilgan Mijorlar</h2>\n//                 <Button\n//                   onClick={() => downloadPDF(fullyPaid, 'Fully-Paid-Orders')}\n//                   className=\"bg-amber-600 hover:bg-amber-700\"\n//                 >\n//                   <Download className=\"mr-2\" size={16} />CSV Yuklab Olish\n//                 </Button>\n//               </div>\n//               {fullyPaid.length === 0 ? (\n//                 <p className=\"text-gray-500\">To'liq To'langan Buyurtmalar Yo'q</p>\n//               ) : (\n//                 <div className=\"bg-white rounded-lg shadow overflow-x-auto\">\n//                   <table className=\"w-full\">\n//                     <thead className=\"bg-gray-100 border-b\">\n//                       <tr>\n//                         <th className=\"px-4 py-3 text-left font-semibold\">Mijoz Ismi</th>\n//                         <th className=\"px-4 py-3 text-left font-semibold\">Telefon Raqami</th>\n//                         <th className=\"px-4 py-3 text-left font-semibold\">Yashash Manzili</th>\n//                         <th className=\"px-4 py-3 text-left font-semibold\">Mahsulot Nomi</th>\n//                         <th className=\"px-4 py-3 text-left font-semibold\">Narxi</th>\n//                         <th className=\"px-4 py-3 text-left font-semibold\">To'lov Qilingan Sana</th>\n//                       </tr>\n//                     </thead>\n//                     <tbody>\n//                       {fullyPaid.map(order => (\n//                         <tr key={order.id} className=\"border-b hover:bg-gray-50\">\n//                           <td className=\"px-4 py-3\">{order.clientName}</td>\n//                           <td className=\"px-4 py-3\">{order.clientPhone}</td>\n//                           <td className=\"px-4 py-3\">{order.clientAddress || 'Korsatilmagan'}</td>\n//                           <td className=\"px-4 py-3 text-sm\">\n//                             {order.products?.map(p => `${p.productName} (${p.quantity} Dona)`).join(', ') || 'Korsatilmagan'}\n//                           </td>\n//                           <td className=\"px-4 py-3 font-semibold text-amber-700\">{order.totalAmount.toLocaleString()} So'm</td>\n//                           <td className=\"px-4 py-3\">{new Date(order.dueDate).toLocaleDateString()} Yil</td>\n//                         </tr>\n//                       ))}\n//                     </tbody>\n//                   </table>\n//                 </div>\n//               )}\n//             </div>\n\n//             {/* Partially Paid */}\n//             <div>\n//               <div className=\"flex justify-between items-center mb-4\">\n//                 <h2 className=\"text-2xl font-bold text-amber-900\">Bo'lib To'lashga Harid Qilgan Mijozlar</h2>\n//                 <Button\n//                   onClick={() => downloadPDF(partiallyPaid, 'Partially-Paid-Orders')}\n//                   className=\"bg-amber-600 hover:bg-amber-700\"\n//                 >\n//                   <Download className=\"mr-2\" size={16} />CSV Yuklab Olish\n//                 </Button>\n//               </div>\n//               {partiallyPaid.length === 0 ? (\n//                 <p className=\"text-gray-500\">Bo'lib To'lashga Harid Qilgan Mahsulotlar Yo'q</p>\n//               ) : (\n//                 <div className=\"bg-white rounded-lg shadow overflow-x-auto\">\n//                   <table className=\"w-full\">\n//                     <thead className=\"bg-gray-100 border-b\">\n//                       <tr>\n//                         <th className=\"px-8 py-3 text-left font-semibold\">Mijoz Ismi</th>\n//                         <th className=\"px-8 py-3 text-left font-semibold\">Telefon Raqami</th>\n//                         <th className=\"px-8 py-3 text-left font-semibold\">Yashash Manzili</th>\n//                         <th className=\"px-8 py-3 text-left font-semibold\">Mahsulot Nomi</th>\n//                         <th className=\"px-8 py-3 text-left font-semibold\">Narxi</th>\n//                         <th className=\"px-8 py-3 text-left font-semibold\">To'langan Summa</th>\n//                         <th className=\"px-8 py-3 text-left font-semibold\">To'lav Holati</th>\n//                         <th className=\"px-8 py-3 text-left font-semibold\">Holati</th>\n//                       </tr>\n//                     </thead>\n//                     <tbody>\n//                       {partiallyPaid.map(order => {\n//                         const daysUntilDue = getDaysUntilDue(order.dueDate);\n//                         const isUrgent = daysUntilDue <= 3 && daysUntilDue > 0;\n//                         return (\n//                           <tr key={order.id} className={`border-b hover:bg-gray-50 ${isUrgent ? 'bg-red-50' : ''}`}>\n//                             <td className=\"px-8 py-3\">{order.clientName}</td>\n//                             <td className=\"px-8 py-3\">{order.clientPhone}</td>\n//                             <td className=\"px-8 py-3\">{order.clientAddress || 'Kiritilmagan'}</td>\n//                             <td className=\"px-8 py-3 text-sm\">\n//                               {order.products?.map(p => `${p.productName} ${p.quantity} Dona`).join(', ') || 'Kiritilmagan'}\n//                             </td>\n//                             <td className=\"px-4 py-3 font-semibold text-amber-700\">{order.totalAmount.toLocaleString()} So'm</td>\n//                             <td className=\"px-4 py-3\">{order.paidAmount.toLocaleString()} So'm</td>\n//                             <td className=\"px-4 py-3\">\n//                               <div className=\"flex gap-2\">\n//                                 <Button\n//                                   size=\"sm\"\n//                                   onClick={() => handlePaymentStatus(order.id, true)}\n//                                   disabled={processingId === order.id}\n//                                   className=\"bg-green-600 hover:bg-green-700 text-white\"\n//                                 >\n//                                   <Check size={16} /> To'lov Qilingan\n//                                 </Button>\n//                                 <Button\n//                                   size=\"sm\"\n//                                   onClick={() => handlePaymentStatus(order.id, false)}\n//                                   disabled={processingId === order.id}\n//                                   className=\"bg-gray-400 hover:bg-gray-500 text-white\"\n//                                 >\n//                                   <X size={16} /> To'lov Qilinmagan\n//                                 </Button>\n//                               </div>\n//                             </td>\n//                             <td className=\"px-4 py-3\">\n//                               {isUrgent ? (\n//                                 <span className=\"px-3 py-1 bg-red-200 text-red-800 rounded-full text-sm font-medium\">\n//                                   ⚠️ {daysUntilDue} Kunlar\n//                                 </span>\n//                               ) : (\n//                                 <span className=\"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm\">\n//                                   Kutyabdi\n//                                 </span>\n//                               )}\n//                             </td>\n//                           </tr>\n//                         );\n//                       })}\n//                     </tbody>\n//                   </table>\n//                 </div>\n//               )}\n//             </div>\n//           </div>\n//         )}\n//       </div>\n//     </main>\n//   );\n// }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { collection, onSnapshot, updateDoc, doc, addDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport { Order } from '@/lib/types';\nimport { AlertCircle, Download, Check } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\n/**\n * CreditPaymentsPage\n * - Fixed 5 months: Nov, Dec, Jan, Feb, Mar\n * - Buttons: Pay for Nov / Pay for Dec / ...\n * - Success modal after Firestore update completes\n * - Disabled pill shows when month already paid\n */\nexport default function CreditPaymentsPage() {\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [processingId, setProcessingId] = useState<string | null>(null);\n\n  // Modal state\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalText, setModalText] = useState('');\n\n  // Fixed months (Option A)\n  const FIXED_MONTHS = ['Nov', 'Dec', 'Jan', 'Feb', 'Mar'];\n\n  // Load orders live from Firestore\n  useEffect(() => {\n    const unsubscribe = onSnapshot(collection(db, 'orders'), (snapshot) => {\n      const ords = snapshot.docs.map((d) => {\n        const data = d.data();\n        return {\n          id: d.id,\n          ...data,\n          createdAt: data.createdAt?.toDate?.() || new Date(data.createdAt),\n          dueDate: data.dueDate?.toDate?.() || new Date(data.dueDate),\n          payments:\n            data.payments?.map((p: any) => ({\n              ...p,\n              date: p.date?.toDate?.() || new Date(p.date),\n            })) || [],\n        } as Order;\n      });\n\n      setOrders(ords);\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const fullyPaid = orders.filter((o) => o.paymentStatus === 'fully-paid');\n  const partiallyPaid = orders.filter(\n    (o) =>\n      o.paymentStatus === 'partial' ||\n      (o.paymentStatus === 'pending' && o.creditMonths > 1)\n  );\n\n  const getDaysUntilDue = (date: Date) => {\n    const now = new Date();\n    const diff = new Date(date).getTime() - now.getTime();\n    return Math.ceil(diff / (1000 * 3600 * 24));\n  };\n\n  const needsAlert = partiallyPaid.some(\n    (o) => getDaysUntilDue(o.dueDate) <= 3\n  );\n\n  // Compute monthly payment for order (fallback logic)\n  const computeMonthly = (order: Order) => {\n    if (order.monthlyPayment && Number(order.monthlyPayment) > 0)\n      return Number(order.monthlyPayment);\n\n    const months = order.creditMonths || 1;\n    const total = Number(order.totalAmount || 0);\n\n    if (months <= 1) return total;\n\n    const remaining =\n      order.remainingAmount != null\n        ? Number(order.remainingAmount)\n        : total - (order.paidAmount || 0);\n\n    const fee = months > 1 ? remaining * 0.05 : 0;\n\n    // round to whole so'm\n    return Math.round((remaining + fee) / months);\n  };\n\n  // Pay for a specific month (by index). Shows success modal after save.\n  const handlePayForMonth = async (orderId: string, monthIndex: number) => {\n    setProcessingId(orderId);\n    try {\n      const order = orders.find((o) => o.id === orderId);\n      if (!order) return;\n\n      // Prevent double-pay if already present\n      const alreadyPaid = (order.payments || []).some(\n        (p: any) => p.monthIndex === monthIndex\n      );\n      if (alreadyPaid) {\n        setModalText(`This month (${FIXED_MONTHS[monthIndex]}) is already paid.`);\n        setModalOpen(true);\n        return;\n      }\n\n      const monthlyAmount = computeMonthly(order);\n      const paymentRecord = {\n        amount: monthlyAmount,\n        date: new Date(),\n        monthIndex,\n        monthLabel: FIXED_MONTHS[monthIndex] || `Month-${monthIndex + 1}`,\n      };\n\n      const newPaidAmount = (order.paidAmount || 0) + monthlyAmount;\n      const isFullyPaid = newPaidAmount >= Number(order.totalAmount || 0);\n\n      // Update Firestore\n      await updateDoc(doc(db, 'orders', orderId), {\n        payments: [...(order.payments || []), paymentRecord],\n        paidAmount: newPaidAmount,\n        paymentStatus: isFullyPaid ? 'fully-paid' : 'pending',\n      });\n\n      // analytics log\n      await addDoc(collection(db, 'analytics_log'), {\n        type: 'monthly_payment',\n        orderId,\n        clientName: order.clientName,\n        amount: monthlyAmount,\n        monthIndex: paymentRecord.monthIndex,\n        monthLabel: paymentRecord.monthLabel,\n        date: new Date(),\n      });\n\n      // Show success modal AFTER update succeeded (Option A)\n      setModalText(`Partial Payment for month ${paymentRecord.monthLabel} is successfully paid`);\n      setModalOpen(true);\n    } catch (err) {\n      console.error('Payment error:', err);\n      setModalText('An error occurred while processing payment.');\n      setModalOpen(true);\n    } finally {\n      setProcessingId(null);\n    }\n  };\n\n  // CSV helper and export\n  const csvEscape = (v: any) => {\n    if (v == null) return '';\n    const s = String(v);\n    if (s.includes(',') || s.includes('\"')) return `\"${s.replace(/\"/g, '\"\"')}\"`;\n    return s;\n  };\n\n  const downloadCSV = (data: Order[], title: string) => {\n    let csv = '\\ufeff';\n    const headers = [\n      'Client Name',\n      'Phone',\n      'Phone 2',\n      'Email',\n      'Address',\n      'Products',\n      'Agreed Amount',\n      'Initial Payment',\n      'Remaining',\n      'Credit Months',\n      'Monthly Payment',\n      'Total',\n      'Paid',\n      'Status',\n      'Created At',\n      'Due Date',\n      ...FIXED_MONTHS.map((m) => `${m} (Scheduled)`),\n      ...FIXED_MONTHS.map((m) => `${m} (Paid)`),\n    ];\n    csv += headers.join(',') + '\\n';\n\n    data.forEach((order) => {\n      const productNames =\n        order.products?.map((p: any) => `${p.productName} x${p.quantity}`).join('; ') || '';\n\n      const monthly = computeMonthly(order);\n\n      const paidPerMonth = Array(FIXED_MONTHS.length).fill(0);\n      order.payments?.forEach((p: any) => {\n        if (typeof p.monthIndex === 'number' && p.monthIndex >= 0 && p.monthIndex < FIXED_MONTHS.length) {\n          paidPerMonth[p.monthIndex] += Number(p.amount || 0);\n        } else {\n          const firstEmpty = paidPerMonth.findIndex((v) => v === 0);\n          if (firstEmpty >= 0) paidPerMonth[firstEmpty] += Number(p.amount || 0);\n        }\n      });\n\n      const scheduledPerMonth = FIXED_MONTHS.map((_, i) => ((order.creditMonths || 0) > i ? monthly : ''));\n\n      const row = [\n        csvEscape(order.clientName),\n        csvEscape(order.clientPhone),\n        csvEscape(order.clientPhone2 || ''),\n        csvEscape(order.clientEmail || ''),\n        csvEscape(order.clientAddress || ''),\n        csvEscape(productNames),\n        order.agreedAmount,\n        order.initialPayment,\n        order.remainingAmount,\n        order.creditMonths,\n        monthly,\n        order.totalAmount,\n        order.paidAmount,\n        order.paymentStatus,\n        order.createdAt?.toLocaleDateString() || '',\n        order.dueDate?.toLocaleDateString() || '',\n        ...scheduledPerMonth,\n        ...paidPerMonth.map((n) => (n === 0 ? '' : n)),\n      ];\n      csv += row.join(',') + '\\n';\n    });\n\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${title}.csv`;\n    a.click();\n  };\n\n  return (\n    <main className=\"min-h-screen bg-gray-50 py-10 px-6\">\n      <h1 className=\"text-3xl font-bold text-amber-900 mb-8\">Kredit To'lovlari</h1>\n\n      {needsAlert && (\n        <div className=\"flex items-center gap-2 bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded-lg mb-8\">\n          <AlertCircle size={20} />\n          <span className=\"font-semibold\">⚠️ Ba'zi mijozlarda muddat yakunlanmoqda!</span>\n        </div>\n      )}\n\n      {/* Success Modal (appears AFTER successful payment save) */}\n      {modalOpen && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4\">\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-fadeIn\">\n            <h3 className=\"text-xl font-semibold mb-2\">Payment Status</h3>\n            <p className=\"text-gray-700 mb-6\">{modalText}</p>\n            <div className=\"flex justify-end\">\n              <Button\n                onClick={() => setModalOpen(false)}\n                className=\"bg-amber-600 hover:bg-amber-700 text-white\"\n              >\n                Close\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {loading ? (\n        <p>Loading…</p>\n      ) : (\n        <>\n          {/* Fully Paid */}\n          <section className=\"mb-14\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h2 className=\"text-2xl font-bold text-green-700\">To'liq To'langanlar</h2>\n              <Button onClick={() => downloadCSV(fullyPaid, 'Fully-Paid')} className=\"bg-green-700 text-white\">\n                <Download size={16} className=\"mr-2\" />CSV Yuklab Olish\n              </Button>\n            </div>\n\n            {fullyPaid.length === 0 ? (\n              <p className=\"text-gray-500\">Hozircha to'liq to'lov qilgan mijozlar yo‘q.</p>\n            ) : (\n              <div className=\"overflow-auto bg-white shadow rounded-lg\">\n                <table className=\"w-full text-sm\">\n                  <thead className=\"bg-gray-100 border-b\">\n                    <tr>\n                      <th className=\"px-4 py-3 text-left\">Mijoz</th>\n                      <th className=\"px-4 py-3 text-left\">Telefon</th>\n                      <th className=\"px-4 py-3 text-left\">Mahsulotlar</th>\n                      <th className=\"px-4 py-3 text-left\">Summa</th>\n                      <th className=\"px-4 py-3 text-left\">Muddat</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {fullyPaid.map((o) => (\n                      <tr key={o.id} className=\"border-b\">\n                        <td className=\"px-4 py-3\">{o.clientName}</td>\n                        <td className=\"px-4 py-3\">{o.clientPhone}</td>\n                        <td className=\"px-4 py-3\">\n                          {o.products?.map((p: any) => `${p.productName} (${p.quantity} dona)`).join(', ')}\n                        </td>\n                        <td className=\"px-4 py-3 font-semibold text-green-700\">{Number(o.totalAmount).toLocaleString()} so‘m</td>\n                        <td className=\"px-4 py-3\">{o.dueDate?.toLocaleDateString()}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </section>\n\n          {/* Partial Payment Section */}\n          <section>\n            <div className=\"flex justify-between items-center mb-4\">\n              <h2 className=\"text-2xl font-bold text-amber-900\">Bo‘lib To‘lash Mijozlar</h2>\n\n              <Button onClick={() => downloadCSV(partiallyPaid, 'Partially-Paid')} className=\"bg-amber-700 text-white\">\n                <Download size={16} className=\"mr-2\" />CSV Yuklab Olish\n              </Button>\n            </div>\n\n            {partiallyPaid.length === 0 ? (\n              <p className=\"text-gray-500\">Bo‘lib to‘lashda bo‘lgan mijozlar yo‘q.</p>\n            ) : (\n              <div className=\"overflow-auto bg-white shadow rounded-lg\">\n                <table className=\"w-full text-sm\">\n                  <thead className=\"bg-gray-100\">\n                    <tr>\n                      <th className=\"px-5 py-3 text-left\">Mijoz</th>\n                      <th className=\"px-5 py-3 text-left\">Telefon</th>\n                      <th className=\"px-5 py-3 text-left\">Mahsulotlar</th>\n                      <th className=\"px-5 py-3 text-left\">Jami</th>\n                      <th className=\"px-5 py-3 text-left\">To‘langan</th>\n                      <th className=\"px-5 py-3 text-left\">To‘lov Qo‘shish</th>\n                      <th className=\"px-5 py-3 text-left\">Holati</th>\n                    </tr>\n                  </thead>\n\n                  <tbody>\n                    {partiallyPaid.map((o) => {\n                      const days = getDaysUntilDue(o.dueDate);\n                      const urgent = days <= 3 && days > 0;\n                      const monthly = computeMonthly(o);\n\n                      // paid month indices (if present)\n                      const paidIndices = (o.payments || [])\n                        .map((p: any) => (typeof p.monthIndex === 'number' ? p.monthIndex : -1))\n                        .filter((n: number) => n >= 0);\n\n                      return (\n                        <tr key={o.id} className={`border-b ${urgent ? 'bg-red-50' : ''}`}>\n                          <td className=\"px-5 py-3\">{o.clientName}</td>\n                          <td className=\"px-5 py-3\">{o.clientPhone}</td>\n                          <td className=\"px-5 py-3\">{o.products?.map((p: any) => `${p.productName} (${p.quantity})`).join(', ')}</td>\n\n                          <td className=\"px-5 py-3 text-amber-700 font-semibold\">\n                            {Number(o.totalAmount).toLocaleString()} so‘m\n                          </td>\n\n                          <td className=\"px-5 py-3\">{Number(o.paidAmount || 0).toLocaleString()} so‘m</td>\n\n                          <td className=\"px-5 py-3\">\n                            <div className=\"flex flex-wrap gap-2\">\n                              {Array.from({ length: o.creditMonths || 0 }).map((_, i) => {\n                                const label = FIXED_MONTHS[i] || `M${i + 1}`;\n                                const already = paidIndices.includes(i);\n                                return (\n                                  <div key={i}>\n                                    {already ? (\n                                      <button className=\"px-3 py-1 bg-green-100 text-green-800 rounded-md text-xs\" disabled>\n                                        {label} — Paid ✓\n                                      </button>\n                                    ) : (\n                                      <Button\n                                        size=\"sm\"\n                                        onClick={() => handlePayForMonth(o.id, i)}\n                                        disabled={processingId === o.id}\n                                        className=\"bg-green-600 hover:bg-green-700 text-white text-xs\"\n                                      >\n                                        Pay for {label}\n                                      </Button>\n                                    )}\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          </td>\n\n                          <td className=\"px-5 py-3 text-sm\">\n                            {urgent ? (\n                              <span className=\"bg-red-200 text-red-800 px-3 py-1 rounded-full\">{days} kun qoldi</span>\n                            ) : (\n                              <span className=\"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full\">Kutyapti</span>\n                            )}\n\n                            <div className=\"mt-2 text-xs text-gray-600\">\n                              {FIXED_MONTHS.slice(0, o.creditMonths).map((m, i) => {\n                                const paid = o.payments?.filter((p: any) => p.monthIndex === i)?.reduce((s: number, p: any) => s + Number(p.amount || 0), 0);\n                                return (\n                                  <div key={i}>\n                                    {m}: {monthly.toLocaleString()} so‘m{paid ? ` — Paid: ${paid.toLocaleString()} so‘m` : ''}\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </section>\n        </>\n      )}\n    </main>\n  );\n}"],"names":[],"mappings":"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"}}]
}