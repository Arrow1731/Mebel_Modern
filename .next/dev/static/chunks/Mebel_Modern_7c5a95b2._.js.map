{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nebel_WebSite/V0__D/MEBEL_GOOO/Mebel_Modern/lib/firebase.ts"],"sourcesContent":["import { initializeApp } from 'firebase/app';\r\nimport { getFirestore } from 'firebase/firestore';\r\nimport { getStorage } from 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDzl9OP8Avxt6qvxI7H91RwA6SMwvEsfjg\",\r\n  authDomain: \"mebelweb-c3706.firebaseapp.com\",\r\n  projectId: \"mebelweb-c3706\",\r\n  storageBucket: \"mebelweb-c3706.firebasestorage.app\",\r\n  messagingSenderId: \"914008148864\",\r\n  appId: \"1:914008148864:web:36dbf5a4a738f8b72d8f65\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nexport const db = getFirestore(app);\r\nexport const storage = getStorage(app);\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;AACT;AAEA,MAAM,MAAM,IAAA,oMAAa,EAAC;AACnB,MAAM,KAAK,IAAA,kMAAY,EAAC;AACxB,MAAM,UAAU,IAAA,8LAAU,EAAC"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nebel_WebSite/V0__D/MEBEL_GOOO/Mebel_Modern/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yLAAO,EAAC,IAAA,gKAAI,EAAC;AACtB"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nebel_WebSite/V0__D/MEBEL_GOOO/Mebel_Modern/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0LAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2LAAI,GAAG;IAE9B,qBACE,6MAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nebel_WebSite/V0__D/MEBEL_GOOO/Mebel_Modern/app/orders/%5Bid%5D/page.tsx"],"sourcesContent":["// 'use client';\r\n// import { useState, useEffect } from 'react';\r\n// import { useParams } from 'next/navigation';\r\n// import { doc, onSnapshot } from 'firebase/firestore';\r\n// import { db } from '@/lib/firebase';\r\n// import { Order } from '@/lib/types';\r\n// import { Button } from '@/components/ui/button';\r\n\r\n// const FIXED_MONTHS = ['Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct'];\r\n\r\n// export default function OrderDetailPage() {\r\n//   const params = useParams();\r\n//   const orderId = params.id;\r\n//   const [order, setOrder] = useState<Order | null>(null);\r\n\r\n//   useEffect(() => {\r\n//     const unsubscribe = onSnapshot(doc(db, 'orders', orderId), (docSnap) => {\r\n//       if (docSnap.exists()) {\r\n//         const data = docSnap.data();\r\n//         setOrder({\r\n//           id: docSnap.id,\r\n//           ...data,\r\n//           payments: data.payments?.map((p: any) => ({ ...p, date: p.date?.toDate?.() || new Date() })),\r\n//           createdAt: data.createdAt?.toDate?.() || new Date(),\r\n//           dueDate: data.dueDate?.toDate?.() || new Date(),\r\n//         });\r\n//       }\r\n//     });\r\n//     return () => unsubscribe();\r\n//   }, [orderId]);\r\n\r\n//   if (!order) return <p>Loading…</p>;\r\n\r\n//   const monthly = Math.round((Number(order.totalAmount) - Number(order.paidAmount || 0)) / ((order.creditMonths || 1) - (order.payments?.length || 0)));\r\n\r\n//   return (\r\n//     <main className=\"p-6\">\r\n//       <h1 className=\"text-2xl font-bold mb-4\">{order.clientName} — To‘lov Tafsiloti</h1>\r\n//       <p>Telefon: {order.clientPhone}</p>\r\n//       <p>Manzil: {order.clientAddress}</p>\r\n\r\n//       <table className=\"w-full text-sm mt-4 border\">\r\n//         <thead className=\"bg-gray-100\">\r\n//           <tr>\r\n//             <th className=\"px-3 py-2\">Oy</th>\r\n//             <th className=\"px-3 py-2\">To‘lov miqdori</th>\r\n//             <th className=\"px-3 py-2\">Holat</th>\r\n//             <th className=\"px-3 py-2\">Keyingi to‘lov sanasi</th>\r\n//           </tr>\r\n//         </thead>\r\n//         <tbody>\r\n//           {Array.from({ length: order.creditMonths || 0 }).map((_, i) => {\r\n//             const monthLabel = FIXED_MONTHS[i];\r\n//             const payment = order.payments?.find(p => p.monthIndex === i);\r\n//             return (\r\n//               <tr key={i} className={payment ? 'bg-green-50' : 'bg-yellow-50'}>\r\n//                 <td className=\"px-3 py-2\">{monthLabel}</td>\r\n//                 <td className=\"px-3 py-2\">{monthly.toLocaleString()} so‘m</td>\r\n//                 <td className=\"px-3 py-2\">{payment ? 'Paid ✓' : 'Pending'}</td>\r\n//                 <td className=\"px-3 py-2\">{!payment ? new Date(order.createdAt).toLocaleDateString() : ''}</td>\r\n//               </tr>\r\n//             );\r\n//           })}\r\n//         </tbody>\r\n//       </table>\r\n//     </main>\r\n//   );\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useParams } from 'next/navigation';\r\nimport { doc, onSnapshot, updateDoc, arrayUnion } from 'firebase/firestore';\r\nimport { db } from '@/lib/firebase';\r\nimport { Order } from '@/lib/types';\r\nimport { Button } from '@/components/ui/button';\r\n\r\nconst FIXED_MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n\r\nexport default function OrderDetailPage() {\r\n  const params = useParams();\r\n  const orderId = params.id;\r\n  const [order, setOrder] = useState<Order | null>(null);\r\n  const [processingMonth, setProcessingMonth] = useState<number | null>(null);\r\n\r\n  // Load order in real-time\r\n  useEffect(() => {\r\n    const unsubscribe = onSnapshot(doc(db, 'orders', orderId), (docSnap) => {\r\n      if (docSnap.exists()) {\r\n        const data = docSnap.data();\r\n        setOrder({\r\n          id: docSnap.id,\r\n          ...data,\r\n          payments: data.payments?.map((p: any) => ({ ...p, date: p.date?.toDate?.() || new Date() })) || [],\r\n          createdAt: data.createdAt?.toDate?.() || new Date(),\r\n          dueDate: data.dueDate?.toDate?.() || new Date(),\r\n        });\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, [orderId]);\r\n\r\n  if (!order) return <p>Loading…</p>;\r\n\r\n  // Compute monthly payment\r\n  const remainingMonths = (order.creditMonths || 1) - (order.payments?.length || 0);\r\n  const remainingAmount = Number(order.totalAmount) - Number(order.paidAmount || 0);\r\n  const monthly = remainingMonths > 0 ? Math.round(remainingAmount / remainingMonths) : 0;\r\n\r\n  // Handle payment for a month\r\n  const handlePayMonth = async (monthIndex: number) => {\r\n    if (!order) return;\r\n    if (processingMonth !== null) return; // prevent double click\r\n\r\n    const alreadyPaid = order.payments?.some(p => p.monthIndex === monthIndex);\r\n    if (alreadyPaid) return;\r\n\r\n    setProcessingMonth(monthIndex);\r\n\r\n    try {\r\n      const paymentRecord = {\r\n        monthIndex,\r\n        monthLabel: FIXED_MONTHS[monthIndex] || `M${monthIndex + 1}`,\r\n        amount: monthly,\r\n        date: new Date(),\r\n      };\r\n\r\n      const newPaidAmount = (order.paidAmount || 0) + monthly;\r\n      const isFullyPaid = newPaidAmount >= Number(order.totalAmount || 0);\r\n\r\n      await updateDoc(doc(db, 'orders', order.id), {\r\n        payments: arrayUnion(paymentRecord),\r\n        paidAmount: newPaidAmount,\r\n        paymentStatus: isFullyPaid ? 'fully-paid' : 'partial',\r\n      });\r\n    } catch (err) {\r\n      console.error('Payment error:', err);\r\n    } finally {\r\n      setProcessingMonth(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">{order.clientName} — To‘lov Tafsiloti</h1>\r\n      <p>Telefon: {order.clientPhone}</p>\r\n      <p>Manzil: {order.clientAddress}</p>\r\n\r\n      <table className=\"w-full text-sm mt-4 border\">\r\n        <thead className=\"bg-gray-100\">\r\n          <tr>\r\n            <th className=\"px-3 py-2\">Oy</th>\r\n            <th className=\"px-3 py-2\">To‘lov miqdori</th>\r\n            <th className=\"px-3 py-2\">Holat</th>\r\n            <th className=\"px-3 py-2\">Keyingi to‘lov sanasi</th>\r\n            <th className=\"px-3 py-2\">Amal</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {Array.from({ length: order.creditMonths || 0 }).map((_, i) => {\r\n            const monthLabel = FIXED_MONTHS[i];\r\n            const payment = order.payments?.find(p => p.monthIndex === i);\r\n            return (\r\n              <tr key={i} className={payment ? 'bg-green-50' : 'bg-yellow-50'}>\r\n                <td className=\"px-3 py-2\">{monthLabel}</td>\r\n                <td className=\"px-3 py-2\">{monthly.toLocaleString()} so‘m</td>\r\n                <td className=\"px-3 py-2\">{payment ? 'Paid ✓' : 'Pending'}</td>\r\n                <td className=\"px-3 py-2\">{!payment ? order.dueDate?.toLocaleDateString() : ''}</td>\r\n                <td className=\"px-3 py-2\">\r\n                  {!payment ? (\r\n                    <Button\r\n                      size=\"sm\"\r\n                      onClick={() => handlePayMonth(i)}\r\n                      disabled={processingMonth === i}\r\n                      className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n                    >\r\n                      To‘landi\r\n                    </Button>\r\n                  ) : (\r\n                    <span className=\"text-green-700 font-semibold\">✓</span>\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}